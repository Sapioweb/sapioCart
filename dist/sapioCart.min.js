function updateCart(t,e){t.items.push(e);var n=0;return t.items.forEach(function(t){n+=parseFloat(t.price)}),t.count=t.items.length,t.total=n.toFixed(2),t}function cartService(t,e){var n=[];this.count=function(){return 0},this.total=function(){return 0},this.items=function(){return n},this.summary=function(){return{items:n,count:0,total:0}}}function removeFromCart(t,e){t.items.splice(e.index,1);var n=0;return t.items.forEach(function(t){n+=parseFloat(t.price)}),t.count=t.items.length,t.total=n.toFixed(2),t}angular.module("sapioCart",[]).directive("cartCount",function(t){return{link:function(e,n,i){var r=0;t.get("cart")&&(r=t.get("cart").items.length),n.text(r),e.$on("LocalStorageModule.notification.setitem",function(t,e,i){n.text(JSON.parse(e.newvalue).items.length)})}}}).directive("cartTotal",function(t){return{link:function(e,n,i){var r=0;t.get("cart")&&(r=t.get("cart").total),n.text(r),e.$on("LocalStorageModule.notification.setitem",function(t,e,i){n.text(JSON.parse(e.newvalue).total)})}}}).directive("addToCart",function(t){return{link:function(e,n,i){var r={items:[],count:0,total:0};n.bind("click",function(){var e=updateCart(t.get("cart")||r,{id:i.productId,price:i.productPrice});t.set("cart",e)})}}}).directive("removeItem",function(t){return{link:function(e,n,i){n.bind("click",function(){var e=removeFromCart(t.get("cart"),{index:i.index});t.set("cart",e)})}}}).service("cartService",cartService);